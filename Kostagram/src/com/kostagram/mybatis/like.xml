<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="like">
	<insert id="insert" parameterType="com.kostagram.service.beans.LikeVO">
		insert into likeit values (seq_like.nextval, #{seq_photo} ,#{dispyn} ,#{email}, SYSDATE, SYSDATE) 
	</insert>

	<delete id ="delete" parameterType="com.kostagram.service.beans.LikeVO">
		delete from likeit where seq_photo = #{seq_photo} and email = #{email}
	</delete>

	<select id="check" parameterType= "com.kostagram.service.beans.LikeVO"
	resultType="com.kostagram.service.beans.LikeVO">
		select * 
		from likeit 
		where seq_photo = #{seq_photo} and email = #{email}
	</select>

	<select id="getLikeByPhotoId" parameterType="com.kostagram.service.beans.PhotoInfoVO"
		resultType="java.util.HashMap">
		select member.nickname
		from likeit, member
		where likeit.seq_photo = #{seq_photo} and member.email = likeit.email
		order by likeit.reg_date desc
	</select>
</mapper>
